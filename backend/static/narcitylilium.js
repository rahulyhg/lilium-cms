var LiliumBackend=function(e){var t,n=this,e=e,i="//localhost:8080/admin",l="",s={},a="Calculating...";this.showmenu=function(){document.body.classList.add("blur");var e=document.getElementsByTagName("lmlslider")[0];e.classList.add("block"),setTimeout(function(){e.classList.add("displayed")},50)},this.dismissmenu=function(){document.body.classList.remove("blur");var e=document.getElementsByTagName("lmlslider")[0];e.classList.remove("displayed"),setTimeout(function(){e.classList.remove("block")},200)},this.addStyle=function(){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href="//localhost:8080/liliumstyle",document.head.appendChild(e)},this.createLinks=function(){document.body.classList.add("lilium");var e=document.createElement("lmlslider");document.documentElement.appendChild(e);var t=document.createElement("div");t.classList.add("lmlsliderbutton"),t.addEventListener("click",n.showmenu);var i=document.createElement("img");i.src="//localhost:8080/static/media/lmllogo.png",t.appendChild(i),document.body.appendChild(t),setTimeout(function(){t.classList.add("shown")},100)},this.getRealTime=function(){var e="//localhost:8080/chartbeatbridge?url="+document.location.href,t=function(){var e=this.responseText;"string"==typeof e&&(e=JSON.parse(e)),e.data&&e.data.stats&&e.data.stats.people?(a=e.data.stats.people,document.getElementById("lmlrealtime").textContent=a):document.getElementById("lmlrealtime").textContent="Unknown"},n=new XMLHttpRequest;n.addEventListener("load",t),n.open("GET",e),n.send()},this.scheduleRealTime=function(){t=setInterval(this.getRealTime,5e3),this.getRealTime()},this.downloadSlider=function(){if("article"==e){var t=function(){var e=this.responseText;document.getElementsByTagName("lmlslider")[0].innerHTML=e,document.getElementById("lmlsliderclose").addEventListener("click",n.dismissmenu)},i=new XMLHttpRequest;i.addEventListener("load",t),i.open("GET","//localhost:8080/articlestats/"+l+"?context="+e),i.send()}},this.init=function(){s.dashboard=i,s.publish=i+"/article/new","article"==e&&(l=document.getElementsByTagName("article")[0].dataset.mi,s.edit=i+"/article/edit/"+l),this.addStyle(),this.createLinks(),this.scheduleRealTime(),this.downloadSlider()},this.init()};window.liliumbackend=new LiliumBackend(window.lmlcontext);