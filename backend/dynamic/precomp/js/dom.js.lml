var DOMCollection = function(dc) { this._coll = Array.prototype.map.call(dc, function(x) { return new DOMElem(x); }); this.forEach = function(cb) { for (var i = 0; i < this._coll.length; i++) { cb(this._coll[i]) } }; this.size = function() { return this._coll.length; } };var _createClass=function(){function b(d,e){for(var h,g=0;g<e.length;g++)h=e[g],h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}return function(d,e,g){return e&&b(d.prototype,e),g&&b(d,g),d}}();function _classCallCheck(b,d){if(!(b instanceof d))throw new TypeError("Cannot call a class as a function")};var DOMElem=function(){function b(d){_classCallCheck(this,b),this._el=d}return _createClass(b,[{key:"destroy",value:function destroy(){this._el.remove()}},{key:"get",value:function get(){return this._el}},{key:"getid",value:function getid(){return this._el_id}},{key:"setid",value:function setid(d){return this._el.id=d,this}},{key:"setclass",value:function setclass(d){return this._el.className=d,this}},{key:"cadd",value:function cadd(d){return this._el.classList.add(d),this}},{key:"crm",value:function crm(d){return this._el.classList.remove(d),this}},{key:"atext",value:function atext(d){return this._el.textContent+=d,this}},{key:"text",value:function text(d){return this._el.textContent=d,this}},{key:"inject",value:function inject(d){return this._el.innerHTML=d,this}},{key:"empty",value:function empty(){for(;this._el.firstChild;)this._el.firstChild.remove();return this}},{key:"bind",value:function bind(d,e){return this._el.addEventListener(d,e),this}},{key:"style",value:function style(d,e){return this._el.style[d]=e,this}},{key:"born",value:function born(d){return this._el.appendChild(d.get&&d.get()||d),this}},{key:"hide",value:function hide(){return this._el.style.display="none",this}},{key:"show",value:function show(){return this._el.style.display="",this}},{key:"attr",value:function attr(d,e){return this._el.setAttribute(d,e),this}},{key:"data",value:function data(d,e){return this._el.dataset[d]=e,this}},{key:"q",value:function q(d,e){return e?new DOMCollection(this._el.querySelectorAll(d)):new b(this._el.querySelector(d))}},{key:"id",get:function get(){return this._el.id}},{key:"value",get:function get(){return this._el.value}},{key:"name",get:function get(){return this._el.name}},{key:"dataset",get:function get(){return this._el.dataset}},{key:"html",get:function get(){return this._el.innerHTML}}]),b}(),DOM=function(){function b(){_classCallCheck(this,b)}return _createClass(b,null,[{key:"stage",value:function stage(d){var e=d.getid();return e||(e="stage"+Math.random().toString().substring(2)+Math.random().toString().substring(2),d.setid(e)),DOMStruct.stage.born(d),new StageElement(d)}},{key:"special",value:function special(d){return DOMSpecial.get(d)}},{key:"id",value:function id(d){return new DOMElem(document.getElementById(d))}},{key:"use",value:function use(d){return new DOMElem(d)}},{key:"q",value:function q(d,e){return e?new DOMCollection(document.querySelectorAll(d)):new DOMElem(document.querySelector(d))}},{key:"dlg",value:function dlg(d){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new DOMDialog(d,e,g)}},{key:"table",value:function table(d,e,g){var h=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};e.forEach(function(j){var k=b.make({node:"tr",parent:d});g.forEach(function(l){k.born(b.make({node:"td",html:h[l]?h[l](j[l],j):j[l]}))})})}},{key:"make",value:function make(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new DOMElem(document.createElement(d.node||"div"));if(d.id&&e.setid(d.id),d.classes&&d.classes.forEach(function(j){return e.cadd(j)}),d.class&&e.setclass(d.class),d.parent&&d.parent.born(e.get()),d.text&&e.text(d.text),d.html&&e.inject(d.html),"text"!=d.node){if(d.attr)for(var g in d.attr)e.attr(g,d.attr[g]);if(d.data)for(var h in d.data)e.data(h,d.data[h])}return e}},{key:"wait",value:function wait(d,e){setTimeout(e,d)}}]),b}();
