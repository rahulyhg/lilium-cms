{#config}
var LMLImageStudioSession = function(opt) {
    var defaults = {
        
    };
    
    this.options = {};

    var dkeys = Object.keys(defaults);
    var okeys = Object.keys(opt || {});

    for (var i = 0; i < dkeys.length; i++) {
        this.options[dkeys[i]] = defaults[dkeys[i]];
    }

    for (var i = 0; i < okeys.length; i++) {
        this.options[okeys[i]] = opt[okeys[i]];
    }
}

var LMLImageStudio = function(image) {
    var that = this;
    this.image = image;
    this.wrapper = document.getElementById("lml-imagestudio");
    this.session = new LMLImageStudioSession();

    this.setImage = function(image) {
        this.image = image;
    };

    this.loadContent = function() {
        document.getElementById("lmlis-preview-thumb").src = "{=config.default.server.url}/uploads/" + that.image.url;
        var sizes = Object.keys(that.image.sizes);
        var sizelist = document.getElementById("lmlis-sizes-list");
        
        sizelist.innerHTML = "";
        for (var i = 0; i < sizes.length; i++) {
            var listitem = document.createElement('li');
            listitem.textContent = sizes[i] + " (" + that.image.sizes[sizes[i]].width + "x" + that.image.sizes[sizes[i]].height + ")";

            sizelist.appendChild(listitem);
        }
    };

    this.cast = function() {
        console.log('Loading image studio');
        this.wrapper.classList.add('showing');
        setTimeout(function() {
            that.wrapper.classList.add('shown');
            console.log('Loaded image studio');
        }, 20);
    };

    this.loadContent();
};














// TEST
$(function() {
    var teststudio = new LMLImageStudio(
{"_id":"5865e73f768a08216c986653","path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg","url":"287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg","name":"Full Size","size":{"width":1300,"height":862},"type":"image","sizes":{"content":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_1024x*.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_1024x*.jpg","width":1024,"height":1024},"featured":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_970x400.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_970x400.jpg","width":970,"height":400},"thumbnailarchive":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_400x400.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_400x400.jpg","width":400,"height":400},"medium":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_300x300.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_300x300.jpg","width":300,"height":300},"thumbnail":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_150x150.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_150x150.jpg","width":150,"height":150},"narcityfeatured":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_970x400.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_970x400.jpg","width":970,"height":400},"thumbnailmedium":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_638x340.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_638x340.jpg","width":638,"height":340},"thumbnaillarge":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_638x340.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_638x340.jpg","width":638,"height":340},"thumbnailsmall":{"path":"/usr/local/ryk/lilium-cms/backend/static/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_308x150.jpg","url":"//localhost:8080/uploads/287_1d6b9e2232767b0f3595629d42893aac83923c17.jpg_308x150.jpg","width":308,"height":150}},"wpid":287,"wpguid":"http://netflixandcode.com/wp-content/uploads/2016/08/55C1968ACE.jpg","artistname":"Internet","artisturl":"internet.org"}
    );

    teststudio.cast();
});
